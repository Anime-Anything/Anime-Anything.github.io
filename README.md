# ğŸ¨ åŠ¨æ¼«å¤´åƒç”Ÿæˆå™¨ V1.0

> ä¸€ä¸ªåŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼ API çš„åœ¨çº¿åŠ¨æ¼«é£æ ¼å¤´åƒç”Ÿæˆå·¥å…·

## âœ¨ é¡¹ç›®ç‰¹è‰²

- ğŸ¯ **çœŸå®APIå¯¹æ¥**ï¼šç›´æ¥é›†æˆé˜¿é‡Œäº‘ç™¾ç‚¼ DashScope API
- ğŸš€ **å¼‚æ­¥å¤„ç†**ï¼šå®Œæ•´å®ç°"åˆ›å»ºä»»åŠ¡â†’è½®è¯¢ç»“æœ"çš„å¼‚æ­¥è°ƒç”¨æ¨¡å¼
- ğŸ” **å®‰å…¨è®¾è®¡**ï¼šç¯å¢ƒå˜é‡ç®¡ç† API Keyï¼Œæ— ç¡¬ç¼–ç æ³„éœ²é£é™©
- ğŸŒ **CORS æ”¯æŒ**ï¼šè§£å†³è·¨åŸŸé—®é¢˜ï¼Œæ”¯æŒ GitHub Pages éƒ¨ç½²
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šç°ä»£åŒ– UIï¼Œæ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- âš¡ **å¼€ç®±å³ç”¨**ï¼šV1.0 å³ä¸ºå®Œæ•´å¯ç”¨çš„ç”Ÿäº§ç‰ˆæœ¬

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
å‰ç«¯ (GitHub Pages)
       â†“ HTTPS Request
ä¸­é—´å±‚ (äº‘å‡½æ•°ä»£ç†)
       â†“ API è°ƒç”¨
åç«¯ (é˜¿é‡Œäº‘ç™¾ç‚¼ API)
```

### æ ¸å¿ƒç»„ä»¶

1. **å‰ç«¯ (Frontend)**ï¼šçº¯é™æ€ç½‘é¡µ (HTML/CSS/JS)
2. **ä»£ç† (Proxy)**ï¼šServerless äº‘å‡½æ•°ï¼Œå¤„ç† CORS å’Œå¼‚æ­¥è½®è¯¢
3. **åç«¯ (Backend)**ï¼šé˜¿é‡Œäº‘ç™¾ç‚¼å›¾åƒç”Ÿæˆ API

## ğŸ“ é¡¹ç›®ç»“æ„

```
anime-avatar-generator/
â”œâ”€â”€ index.html              # å‰ç«¯é¡µé¢
â”œâ”€â”€ script.js               # å‰ç«¯é€»è¾‘
â”œâ”€â”€ style.css               # æ ·å¼è¡¨
â”œâ”€â”€ proxy-function.js       # äº‘å‡½æ•°ä»£ç†
â”œâ”€â”€ package.json            # äº‘å‡½æ•°ä¾èµ–
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²äº‘å‡½æ•°ä»£ç†

#### æ–¹å¼1ï¼šä½¿ç”¨è…¾è®¯äº‘ SCF

1. ç™»å½• [è…¾è®¯äº‘äº‘å‡½æ•°æ§åˆ¶å°](https://console.cloud.tencent.com/scf)
2. åˆ›å»ºæ–°å‡½æ•°ï¼Œé€‰æ‹© "è‡ªå®šä¹‰åˆ›å»º"
3. è¿è¡Œç¯å¢ƒé€‰æ‹© `Node.js 14.18`
4. ä¸Šä¼  `proxy-function.js` å’Œ `package.json`
5. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   ```
   DASHSCOPE_API_KEY = sk-a641f6330e92448a8f27049ea6c1eda6
   ```
6. é…ç½®è§¦å‘å™¨ï¼šé€‰æ‹© "APIç½‘å…³è§¦å‘"
7. è·å–è§¦å‘å™¨æä¾›çš„è®¿é—® URL

#### æ–¹å¼2ï¼šä½¿ç”¨é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—

1. ç™»å½• [é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—æ§åˆ¶å°](https://fc.console.aliyun.com/)
2. åˆ›å»ºæœåŠ¡å’Œå‡½æ•°
3. ä¸Šä¼ ä»£ç åŒ… (åŒ…å« `proxy-function.js` å’Œ `package.json`)
4. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   ```
   DASHSCOPE_API_KEY = sk-a641f6330e92448a8f27049ea6c1eda6
   ```
5. é…ç½®HTTPè§¦å‘å™¨
6. è·å–è§¦å‘å™¨æä¾›çš„è®¿é—® URL

#### æ–¹å¼3ï¼šä½¿ç”¨ Vercel

1. å°†é¡¹ç›®æ¨é€åˆ° GitHub
2. ç™»å½• [Vercel](https://vercel.com/)
3. å¯¼å…¥é¡¹ç›®å¹¶éƒ¨ç½²
4. åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ï¼š
   ```
   DASHSCOPE_API_KEY = sk-a641f6330e92448a8f27049ea6c1eda6
   ```

### ç¬¬äºŒæ­¥ï¼šé…ç½®å‰ç«¯

1. ç¼–è¾‘ `script.js` æ–‡ä»¶
2. å°†ç¬¬9è¡Œçš„äº‘å‡½æ•° URL æ›¿æ¢ä¸ºå®é™…åœ°å€ï¼š
   ```javascript
   PROXY_API_URL: 'https://ä½ çš„äº‘å‡½æ•°åœ°å€.com/api/convert',
   ```

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯

#### GitHub Pages éƒ¨ç½²

1. åˆ›å»º GitHub ä»“åº“å¹¶æ¨é€ä»£ç 
2. è¿›å…¥ä»“åº“ Settings â†’ Pages
3. é€‰æ‹©éƒ¨ç½²æºä¸º `main` åˆ†æ”¯
4. è®¿é—®æä¾›çš„ GitHub Pages URL

#### æœ¬åœ°æµ‹è¯•

```bash
# ä½¿ç”¨ Python å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
cd anime-avatar-generator
python -m http.server 8000

# æˆ–ä½¿ç”¨ Node.js
npx http-server -p 8000

# è®¿é—® http://localhost:8000
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|----|----|
| `DASHSCOPE_API_KEY` | `sk-a641f6330e92448a8f27049ea6c1eda6` | é˜¿é‡Œäº‘ç™¾ç‚¼ API å¯†é’¥ |

âš ï¸ **å®‰å…¨æé†’**ï¼šç»å¯¹ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Keyï¼

### API å‚æ•°é…ç½®

äº‘å‡½æ•°ä¸­çš„å…³é”®é…ç½®é¡¹ï¼š

```javascript
// è½®è¯¢è®¾ç½®
const MAX_POLLING_ATTEMPTS = 20;  // æœ€å¤§è½®è¯¢æ¬¡æ•°
const POLLING_INTERVAL = 3000;    // è½®è¯¢é—´éš”(æ¯«ç§’)

// API ç«¯ç‚¹
const DASHSCOPE_BASE_URL = 'https://dashscope.aliyuncs.com/api/v1';
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **è¾“å…¥å›¾ç‰‡ URL**ï¼šéœ€è¦å…¬ç½‘å¯è®¿é—®çš„å›¾ç‰‡é“¾æ¥
2. **é€‰æ‹©é£æ ¼**ï¼šå¦‚ "æ³•å›½ç»˜æœ¬é£æ ¼"ã€"æ—¥å¼åŠ¨æ¼«é£æ ¼" ç­‰
3. **ç‚¹å‡»è½¬æ¢**ï¼šç­‰å¾… 30-60 ç§’ç”Ÿæˆç»“æœ
4. **ä¸‹è½½ä¿å­˜**ï¼šå³é”®ä¿å­˜ç”Ÿæˆçš„åŠ¨æ¼«é£æ ¼å¤´åƒ

### æ”¯æŒçš„å›¾ç‰‡æ ¼å¼

- **æ ¼å¼**ï¼šJPGã€PNGã€WEBP
- **å¤§å°**ï¼šå»ºè®® 1MB ä»¥å†…
- **åˆ†è¾¨ç‡**ï¼šå»ºè®® 1024x1024 ä»¥ä¸‹
- **è®¿é—®**ï¼šå¿…é¡»æ”¯æŒå…¬ç½‘ç›´æ¥è®¿é—®

### é£æ ¼ç¤ºä¾‹

| é£æ ¼æè¿° | æ•ˆæœ |
|----------|------|
| æ³•å›½ç»˜æœ¬é£æ ¼ | æŸ”å’Œè‰²å½©ï¼Œæ‰‹ç»˜æ„Ÿå¼º |
| æ—¥å¼åŠ¨æ¼«é£æ ¼ | ç»å…¸åŠ¨æ¼«äººç‰©é£æ ¼ |
| æ°´å½©ç”»é£æ ¼ | æ°´å½©æ¸²æŸ“æ•ˆæœ |
| å¡é€šé£æ ¼ | ç®€åŒ–çš„å¡é€šå½¢è±¡ |

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **"ç³»ç»Ÿé…ç½®é”™è¯¯"**
   - æ£€æŸ¥ `script.js` ä¸­çš„ `PROXY_API_URL` æ˜¯å¦é…ç½®æ­£ç¡®

2. **"API Key æœªé…ç½®"**
   - ç¡®è®¤äº‘å‡½æ•°ç¯å¢ƒå˜é‡ `DASHSCOPE_API_KEY` å·²è®¾ç½®

3. **"è·¨åŸŸè®¿é—®è¢«é˜»æ­¢"**
   - æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦æ­£ç¡®è®¾ç½®äº† CORS å“åº”å¤´

4. **"ä»»åŠ¡å¤„ç†è¶…æ—¶"**
   - æ£€æŸ¥è¾“å…¥çš„å›¾ç‰‡ URL æ˜¯å¦å¯è®¿é—®
   - å°è¯•ä½¿ç”¨æ›´å°å°ºå¯¸çš„å›¾ç‰‡

5. **"ç½‘ç»œè¿æ¥å¤±è´¥"**
   - æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦æ­£å¸¸è¿è¡Œ
   - ç¡®è®¤äº‘å‡½æ•° URL å¯ä»¥æ­£å¸¸è®¿é—®

### è°ƒè¯•æ–¹æ³•

1. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**ï¼šæŸ¥çœ‹ JavaScript é”™è¯¯ä¿¡æ¯
2. **æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—**ï¼šåœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°æŸ¥çœ‹å‡½æ•°æ‰§è¡Œæ—¥å¿—
3. **æµ‹è¯• API è¿é€šæ€§**ï¼šç›´æ¥è®¿é—®äº‘å‡½æ•° URL æµ‹è¯•å“åº”

## ğŸ”„ API æµç¨‹è¯¦è§£

### å®Œæ•´è°ƒç”¨é“¾è·¯

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯
    participant P as ä»£ç†äº‘å‡½æ•°
    participant D as é˜¿é‡Œäº‘ç™¾ç‚¼API

    U->>F: è¾“å…¥å›¾ç‰‡URLå’Œé£æ ¼
    F->>P: POST /api/convert
    P->>D: POST /services/aigc/image2image/image-synthesis
    D->>P: è¿”å› task_id
    
    loop è½®è¯¢ä»»åŠ¡çŠ¶æ€
        P->>D: GET /tasks/{task_id}
        D->>P: è¿”å›ä»»åŠ¡çŠ¶æ€
        alt ä»»åŠ¡æˆåŠŸ
            P->>F: è¿”å›å›¾ç‰‡URL
            F->>U: æ˜¾ç¤ºç”Ÿæˆç»“æœ
        else ä»»åŠ¡å¤±è´¥
            P->>F: è¿”å›é”™è¯¯ä¿¡æ¯
            F->>U: æ˜¾ç¤ºé”™è¯¯æç¤º
        else ä»»åŠ¡è¿›è¡Œä¸­
            Note over P: ç­‰å¾…3ç§’ç»§ç»­è½®è¯¢
        end
    end
```

### API å“åº”æ ¼å¼

#### æˆåŠŸå“åº”

```json
{
  "success": true,
  "imageUrl": "https://dashscope-result-bj.oss-cn-beijing.aliyuncs.com/...",
  "message": "å›¾åƒè½¬æ¢æˆåŠŸï¼"
}
```

#### å¤±è´¥å“åº”

```json
{
  "success": false,
  "error": "ä»»åŠ¡å¤±è´¥: è¾“å…¥å›¾ç‰‡æ ¼å¼ä¸æ”¯æŒ"
}
```

## ğŸ¯ ç‰ˆæœ¬ä¿¡æ¯

### V1.0 (å½“å‰ç‰ˆæœ¬)

- âœ… é˜¿é‡Œäº‘ç™¾ç‚¼ API é›†æˆ
- âœ… å¼‚æ­¥ä»»åŠ¡è½®è¯¢æœºåˆ¶
- âœ… CORS è·¨åŸŸè§£å†³æ–¹æ¡ˆ
- âœ… ç°ä»£åŒ–å“åº”å¼ UI
- âœ… é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ
- âœ… ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®

### è·¯çº¿å›¾

- ğŸ”„ V1.1ï¼šæ”¯æŒæœ¬åœ°æ–‡ä»¶ä¸Šä¼ 
- ğŸ”„ V1.2ï¼šæ‰¹é‡å¤„ç†åŠŸèƒ½
- ğŸ”„ V1.3ï¼šæ›´å¤šé£æ ¼é€‰é¡¹
- ğŸ”„ V2.0ï¼šç”¨æˆ·è´¦æˆ·ç³»ç»Ÿ

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®åœ°å€ï¼šhttps://github.com/your-username/anime-avatar-generator
- é—®é¢˜åé¦ˆï¼šhttps://github.com/your-username/anime-avatar-generator/issues
- åœ¨çº¿æ¼”ç¤ºï¼šhttps://your-username.github.io/anime-avatar-generator

---

**âš¡ åŸºäºé˜¿é‡Œäº‘ç™¾ç‚¼ API | ï¿½ï¿½ è®©æ¯ä¸ªäººéƒ½èƒ½æ‹¥æœ‰ä¸“å±åŠ¨æ¼«å¤´åƒ** 